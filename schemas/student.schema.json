{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Student",
  "description": "NORIX students collection schema. Verification is based on ID documents and admin approval.",
  "bsonType": "object",
  "additionalProperties": true,
  "required": [
    "name",
    "phone",
    "college",
    "college_email",
    "skills",
    "availability",
    "verified",
    "reliability_score",
    "total_shifts",
    "no_shows"
  ],
  "properties": {
    "_id": {
      "description": "MongoDB ObjectId",
      "bsonType": "objectId"
    },
    "name": {
      "description": "Student's full name",
      "bsonType": "string"
    },
    "phone": {
      "description": "Primary contact number (no strict pattern enforced)",
      "bsonType": "string"
    },
    "college": {
      "description": "College or university name",
      "bsonType": "string"
    },
    "college_email": {
      "description": "College email address (required)",
      "bsonType": "string"
    },
    "id_doc_url": {
      "description": "URL to an ID document used for verification (legacy field, can be empty)",
      "bsonType": "string"
    },
    "id_doc_front_url": {
      "description": "URL to the front side of ID document",
      "bsonType": "string"
    },
    "id_doc_back_url": {
      "description": "URL to the back side of ID document",
      "bsonType": "string"
    },
    "id_doc_hash": {
      "description": "Hash of the ID document for duplicate detection",
      "bsonType": "string"
    },
    "id_submitted_at": {
      "description": "Date when ID document was submitted",
      "bsonType": ["date", "null"]
    },
    "video_url": {
      "description": "URL to video verification",
      "bsonType": "string"
    },
    "video_submitted_at": {
      "description": "Date when video was submitted",
      "bsonType": ["date", "null"]
    },
    "trial_shift_status": {
      "description": "Status of trial shift",
      "bsonType": "string",
      "enum": ["not_requested", "pending", "assigned", "completed", "failed"]
    },
    "rejection_code": {
      "description": "Code for rejection reason",
      "bsonType": "string"
    },
    "admin_notes": {
      "description": "Admin notes about the student",
      "bsonType": "string"
    },
    "skills": {
      "description": "List of skill tags",
      "bsonType": "array",
      "items": {
        "bsonType": "string"
      }
    },
    "availability": {
      "description": "List of availability tags (e.g., days/time blocks)",
      "bsonType": "array",
      "items": {
        "bsonType": "string"
      }
    },
    "verified": {
      "description": "Admin-controlled verification state (not tied to college_email)",
      "bsonType": "bool"
    },
    "reliability_score": {
      "description": "0â€“100 score computed from attendance history",
      "bsonType": [
        "int",
        "long",
        "double",
        "decimal"
      ]
    },
    "total_shifts": {
      "description": "Total number of shifts assigned",
      "bsonType": [
        "int",
        "long",
        "double",
        "decimal"
      ]
    },
    "no_shows": {
      "description": "Number of missed (no-show) shifts",
      "bsonType": [
        "int",
        "long",
        "double",
        "decimal"
      ]
    }
  }
}


